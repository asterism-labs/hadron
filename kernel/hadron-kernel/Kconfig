# Hadron kernel core configuration.

menu "General"

config serial_log
    bool "Enable serial port logging"
    default y
    binding cfg

config LOG_LEVEL
    choice "Kernel log level" [error, warn, info, debug, trace]
    default "debug"
    binding cfg cumulative
    binding const

config KERNEL_HEAP_SIZE
    u64 "Kernel heap size in bytes"
    default 0x100000
    binding const

endmenu

menu "SMP"

config smp
    bool "Enable symmetric multiprocessing"
    default y
    depends on acpi
    select apic
    binding cfg
    binding build

config MAX_CPUS
    u32 "Maximum number of CPUs supported"
    default 256
    range 1 256
    depends on smp
    binding const

endmenu

menu "Hardware"

config acpi
    bool "Enable ACPI table parsing"
    default y
    binding cfg

config apic
    bool "Enable APIC interrupt controller"
    default n
    binding cfg

endmenu

menu "Debugging"

config lock_debug
    bool "IRQ-context spinlock assertion"
    default y
    binding cfg

config lockdep
    bool "Lock dependency tracking"
    default n
    binding cfg

menu "Subsystem Tracing"

config trace_mm
    bool "Memory management tracing (PMM, VMM, heap)"
    default n
    binding cfg

config trace_vfs
    bool "VFS tracing"
    default n
    binding cfg

config trace_sched
    bool "Scheduler tracing"
    default n
    binding cfg

config trace_pci
    bool "PCI bus tracing"
    default n
    binding cfg

config trace_acpi
    bool "ACPI tracing"
    default n
    binding cfg

config trace_irq
    bool "Interrupt tracing"
    default n
    binding cfg

config trace_syscall
    bool "Syscall tracing"
    default n
    binding cfg

config trace_drivers
    bool "Driver framework tracing"
    default n
    binding cfg

endmenu

menu "Sanitizers"

config debug_heap_poison
    bool "Heap allocation poisoning & red zones"
    default n
    binding cfg
    help "Fill allocations with 0xCD, freed memory with 0xDD, add 16-byte red zones (0xFD)"

config debug_pmm_poison
    bool "Physical page poisoning"
    default n
    binding cfg
    help "Fill freed pages with 0xDEAD pattern, verify on allocation (detects use-after-free)"

config debug_alloc_track
    bool "Allocation origin tracking"
    default n
    depends on debug_heap_poison
    binding cfg
    help "Track allocation counts and origins, provides dump_alloc_stats() for leak investigation"

endmenu

endmenu
